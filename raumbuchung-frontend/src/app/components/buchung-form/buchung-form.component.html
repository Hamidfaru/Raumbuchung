<div class="main-container">
  <!-- Raum Info -->
  <div *ngIf="raum" class="content-section">
    <div class="raum-header">
      <h1>Raum buchen: {{ raum.raumName }}</h1>
      <div class="raum-details">
        <div class="detail-item">
          <strong>Kapazität:</strong> {{ raum.kapazitaet }} Personen
        </div>
        <div class="detail-item">
          <strong>Ausstattung:</strong> {{ raum.ausstattung }}
        </div>
        <div class="detail-item">
          <strong>Standort:</strong> {{ raum.gebaeude }}, Etage {{ raum.etage }}
        </div>
      </div>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Buchungsformular -->
  <div class="content-section">
    <h2>Buchungsdetails</h2>
    <form [formGroup]="buchungForm" (ngSubmit)="onSubmit()">
      
      <!-- Persönliche Daten -->
      <div class="form-section">
        <h3>Persönliche Daten</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="benutzerName" class="form-label">Ihr Name *</label>
            <input type="text" 
                   class="form-control" 
                   id="benutzerName"
                   formControlName="benutzerName"
                   [class.is-invalid]="submitted && f['benutzerName'].errors"
                   placeholder="Max Mustermann">
            <div *ngIf="submitted && f['benutzerName'].errors" class="invalid-feedback">
              <div *ngIf="f['benutzerName'].errors['required']">Name ist erforderlich</div>
              <div *ngIf="f['benutzerName'].errors['minlength']">Name muss mindestens 2 Zeichen lang sein</div>
            </div>
          </div>

          <div class="form-group">
            <label for="benutzerEmail" class="form-label">E-Mail *</label>
            <input type="email" 
                   class="form-control" 
                   id="benutzerEmail"
                   formControlName="benutzerEmail"
                   [class.is-invalid]="submitted && f['benutzerEmail'].errors"
                   placeholder="max@example.com">
            <div *ngIf="submitted && f['benutzerEmail'].errors" class="invalid-feedback">
              <div *ngIf="f['benutzerEmail'].errors['required']">E-Mail ist erforderlich</div>
              <div *ngIf="f['benutzerEmail'].errors['email']">Bitte geben Sie eine gültige E-Mail ein</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Zeitraum -->
      <div class="form-section">
        <h3>Zeitraum</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="startZeit" class="form-label">Startzeit *</label>
            <input type="datetime-local" 
                   class="form-control" 
                   id="startZeit"
                   formControlName="startZeit"
                   [class.is-invalid]="submitted && f['startZeit'].errors">
            <div *ngIf="submitted && f['startZeit'].errors" class="invalid-feedback">
              Startzeit ist erforderlich
            </div>
          </div>

          <div class="form-group">
            <label for="endZeit" class="form-label">Endzeit *</label>
            <input type="datetime-local" 
                   class="form-control" 
                   id="endZeit"
                   formControlName="endZeit"
                   [class.is-invalid]="submitted && f['endZeit'].errors">
            <div *ngIf="submitted && f['endZeit'].errors" class="invalid-feedback">
              Endzeit ist erforderlich
            </div>
          </div>
        </div>
      </div>

      <!-- Buchungsdetails -->
      <div class="form-section">
        <h3>Buchungsdetails</h3>
        
        <div class="form-group">
          <label for="buchungsZweck" class="form-label">Buchungszweck *</label>
          <textarea class="form-control" 
                    id="buchungsZweck"
                    formControlName="buchungsZweck"
                    rows="3"
                    placeholder="Beschreiben Sie kurz den Zweck der Buchung..."
                    [class.is-invalid]="submitted && f['buchungsZweck'].errors"></textarea>
          <div *ngIf="submitted && f['buchungsZweck'].errors" class="invalid-feedback">
            <div *ngIf="f['buchungsZweck'].errors['required']">Buchungszweck ist erforderlich</div>
            <div *ngIf="f['buchungsZweck'].errors['minlength']">Buchungszweck muss mindestens 5 Zeichen lang sein</div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="teilnehmerAnzahl" class="form-label">Teilnehmeranzahl</label>
            <input type="number" 
                   class="form-control" 
                   id="teilnehmerAnzahl"
                   formControlName="teilnehmerAnzahl"
                   min="1"
                  [max]="raum?.kapazitaet || 1"
                   [class.is-invalid]="submitted && f['teilnehmerAnzahl'].errors"
                   placeholder="0">
            <div *ngIf="submitted && f['teilnehmerAnzahl'].errors" class="invalid-feedback">
              Teilnehmeranzahl muss mindestens 1 sein
            </div>
            <small class="form-text">Maximal {{ raum?.kapazitaet }} Teilnehmer</small>
          </div>

          <div class="form-group">
            <label for="bemerkungen" class="form-label">Bemerkungen</label>
            <textarea class="form-control" 
                      id="bemerkungen"
                      formControlName="bemerkungen"
                      rows="2"
                      placeholder="Zusätzliche Anforderungen oder Wünsche..."></textarea>
          </div>
        </div>
      </div>

      <!-- Buttons -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="loading">
          <span *ngIf="loading" class="spinner"></span>
          {{ loading ? 'Wird gebucht...' : 'Buchung erstellen' }}
        </button>
        <button type="button" class="btn btn-secondary" routerLink="/">
          Abbrechen
        </button>
      </div>
    </form>
  </div>
</div>
